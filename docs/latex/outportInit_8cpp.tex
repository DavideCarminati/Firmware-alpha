\hypertarget{outportInit_8cpp}{}\section{src/outport\+Init.cpp File Reference}
\label{outportInit_8cpp}\index{src/outport\+Init.\+cpp@{src/outport\+Init.\+cpp}}


This thread creates the periodic task sending the pulse-\/width modulated signals to the enabled pins.  


{\ttfamily \#include $<$mbed.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Servo.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}global\+\_\+vars.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}outport\+Init.\+hpp\char`\"{}}\newline
Include dependency graph for outport\+Init.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{outportInit_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{outportInit_8cpp_a2932cb03107afa47dfd97b8547333d8f}{outport\+Init} ()
\item 
void \hyperlink{outportInit_8cpp_a44135f9954133bdb9393bc4ca364732f}{post\+Servo\+Event} (void)
\item 
void \hyperlink{outportInit_8cpp_a0b36bbd1441854181e55a0d94af7345f}{Servo1\+Write} (void)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This thread creates the periodic task sending the pulse-\/width modulated signals to the enabled pins. 

\begin{DoxyAuthor}{Author}
Davide Carminati
\end{DoxyAuthor}
The script uses events and a queue to pile periodic tasks. The queue contains both read-\/from and write-\/to pins events. 

\subsection{Function Documentation}
\mbox{\Hypertarget{outportInit_8cpp_a2932cb03107afa47dfd97b8547333d8f}\label{outportInit_8cpp_a2932cb03107afa47dfd97b8547333d8f}} 
\index{outport\+Init.\+cpp@{outport\+Init.\+cpp}!outport\+Init@{outport\+Init}}
\index{outport\+Init@{outport\+Init}!outport\+Init.\+cpp@{outport\+Init.\+cpp}}
\subsubsection{\texorpdfstring{outport\+Init()}{outportInit()}}
{\footnotesize\ttfamily void outport\+Init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Initialization of the servomotor, spawn of the event posting thread and dispatch queue. The Servo\+::calibrate() method accepts as first input a value IN S\+E\+C\+O\+N\+DS. \mbox{\Hypertarget{outportInit_8cpp_a44135f9954133bdb9393bc4ca364732f}\label{outportInit_8cpp_a44135f9954133bdb9393bc4ca364732f}} 
\index{outport\+Init.\+cpp@{outport\+Init.\+cpp}!post\+Servo\+Event@{post\+Servo\+Event}}
\index{post\+Servo\+Event@{post\+Servo\+Event}!outport\+Init.\+cpp@{outport\+Init.\+cpp}}
\subsubsection{\texorpdfstring{post\+Servo\+Event()}{postServoEvent()}}
{\footnotesize\ttfamily void post\+Servo\+Event (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

The period and the initial delay of the P\+WM write event are set. Then it is posted in the queue. \mbox{\Hypertarget{outportInit_8cpp_a0b36bbd1441854181e55a0d94af7345f}\label{outportInit_8cpp_a0b36bbd1441854181e55a0d94af7345f}} 
\index{outport\+Init.\+cpp@{outport\+Init.\+cpp}!Servo1\+Write@{Servo1\+Write}}
\index{Servo1\+Write@{Servo1\+Write}!outport\+Init.\+cpp@{outport\+Init.\+cpp}}
\subsubsection{\texorpdfstring{Servo1\+Write()}{Servo1Write()}}
{\footnotesize\ttfamily void Servo1\+Write (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

The event is simply a method writing the computed duty cycle to the enabled pin port. The duty cycle is directly dependent on the output of the controller thread\+: note that the extern variable feedback\+\_\+control\+\_\+Y is present. 